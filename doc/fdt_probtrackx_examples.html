<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><HTML><HEAD><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><link REL="stylesheet" TYPE="text/css" href="../fsl.css"><TITLE>FSL</TITLE></HEAD><BODY><IFRAME width="100%" scrolling="no" frameborder="0" src="fdt_top.html">Broken</IFRAME><h3>PROBTRACKX - A few command-line examples</h3><ol><li><a href="#ex1">Seeding from a single mask that contains combined surfaces and voxels</a><li><a href="#exp2">Using prior masks</a><li><a href="#exp3">Using Matrix1 and Matrix2</a><li><a href="#exp4">Using Matrix3</a></ol><a name="#exp1"></a><h4>Seeding from a single mask that contains combined surfaces and voxels</h4><p>Here we want the seed mask to be a combination of voxels from subcortical structures and a cortical region represented using a surface. You can set a <i>combined</i> voxel/surface ROI by creating a ASCII text file that contains the path to both files (or more) and feed that into probtrackx. (see <a href="fdt_probtrackx_surface_formats.html">here</a> for a description of surface formats that probtrackx can read).</p><pre>   <code>   echo myvolume.nii.gz mysurface.asc &gt; roilist.txt   probtrackx --seed=roilist.txt [+other options]</code></pre><a name="#exp2"></a><h4>Using prior masks</h4><p>Here we want to use a surface stopping mask. Tracking from the grey/white white matter surface, and setting a stopping maskat the pial surface. This way, we can easily and accurately avoid streamlines that cross from one side of a gyrus to the other.<p>We will also add a few volume masks as waypoints to get only cortico-subcortical streamlines. We will set the waypointcondition to "OR" so we can get streamlines that cross either of the sub-cortical ROIs.<p>Finally, we will also add the sub-cortical structures as stopping masks to avoid streamlines crossing one structure and continuingto the others.<pre><code>   echo lh.pial.asc thalamus.nii.gz striatum.nii.gz pallidum.niii.gz > stopfiles.txt   echo thalamus.nii.gz striatum.nii.gz pallidum.niii.gz > waypoints.txt   probtrackx --seed=lh.white.asc --stop=stopfiles.txt --waypoints=waypoints.txt --waycond=OR [+other options]</code></pre><a name="#exp3"></a><h4>Using Matrix1 and Matrix2</h4><p>These options allow you to store connection probabilities in a matrix format. <p>Matrix1 stores all connection probabilities between pairs of points (vertices or voxels) of the seed ROI (remember, the seed ROI can be a combination of voxels and vertices).<p>Matrix2 stores connection probabilities between the seed ROI and a second ROI.<p>Typically, the seed can be a cortical or sub-cortical grey matter mask, and the target ROI a mask of the whole brain.<p>The target ROI can be at a lower resolution (in seed space) if required.<p>The following example uses a 5mm sub-sampled brain as a target:<pre><code>   flirt -in nodif_brain_mask -ref nodif_brain_mask -out lowresmask -applyisoxfm 5      probtrackx --seed=seedroi --omatrix1 --omatrix2 --target2=lowresmask [+other options]</code></pre><p><u>output of matrix1:</u> The following files are produced by the <code>--omatrix1</code> option:<pre><code>    fdt_matrix1.dot    coords_for_matrix1</code></pre><p><u>output of matrix2:</u> The following files are produced by the <code>--omatrix2</code> option:<pre><code>    fdt_matrix2.dot    coords_for_matrix2    lookup_tract_space_matrix2</code></pre><a name="#exp4"></a><h4>Using Matrix3</h4><p>This option allows you to store connection probabilities between pairs of points in an ROI, or pairs of pointsfrom two different ROIs, given a separate seed ROI. Streamlines are seeded from every seed point in both directions, and an entry of the matrix s updated every time the streamline passes through a pair of points defined in the target mask(s).<p>The following example uses the whole brain as a seed mask (choose the number of samples carefully!) and a corticalsurface as the target.<pre><code>   probtrackx --seed=nodif_brain --omatrix3 --target3=cortex.txt [+other options]</code></pre><p><u>output of matrix3:</u> The following files are produced by the <code>--omatrix3</code> option:<pre><code>    fdt_matrix3.dot    coords_for_matrix3    lookup_tract_space_matrix3</code></pre><a name="#exp5"></a><HR><FONT SIZE=1>Copyright &copy; 2000-2011, written by <A HREF="http://www.fmrib.ox.ac.uk/~saad/index.html">S. Jbabdi</A>.</FONT>