<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><HTML><HEAD><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><link REL="stylesheet" TYPE="text/css" href="../fsl.css"><TITLE>FSL</TITLE></HEAD><BODY><IFRAME width="100%" scrolling="no" frameborder="0" src="fdt_top.html">Broken</IFRAME><p>This page lists probtrackx's command-line arguments and explains them in more details. Click on the appropriate header to go straight to the part that you are interested in.</p><p>If you can't be bothered with going through the doc, maybe a few <a href="fdt_probtrackx_examples.html">examples</a> will help.</p><h3>PROBTRACKX - Command-line arguments</h3><pre><a href="#comparg">Compulsory arguments (You MUST set one or more of):</a>	-s,--samples	Basename for samples files - e.g. 'merged'	-m,--mask	Bet binary mask file in diffusion space	-x,--seed	Seed volume or list (ascii text file) of volumes and/or surfaces<a href="#optarg">Optional arguments (You may optionally specify one or more of):</a>	-V,--verbose	Verbose level, [0-2]	-h,--help	Display this message        <a href="#opt"><b>Output options</b></a>	-o,--out	Output file (default='fdt_paths')	--dir		Directory to put the final volumes in - code makes this directory - default='logdir'	--forcedir	Use the actual directory name given - i.e. don't add + to make a new directory        <a href="#opt2"><b>More output options</b></a>	--simple	Track from a list of voxels (seed must be a ASCII list of coordinates)	--network	Activate network mode - only keep paths going through at least one of the other seed masks	--opd		Output path distribution	--pd		Correct path distribution for the length of the pathways	--os2t		Output seeds to targets	--s2tastext	Output seed-to-target counts as a text file (default in simple mode)        <a href="#masks"><b>Prior masks</b></a>	--targetmasks	File containing a list of target masks - for seeds_to_targets classification	--waypoints	Waypoint mask or ascii list of waypoint masks - only keep paths going through ALL the masks	--waycond	Waypoint condition. Either 'AND' (default) or 'OR'	--avoid		Reject pathways passing through locations given by this mask	--stop		Stop tracking at locations given by this mask file        <a href="#mat123"><b>Connectivity matrices and masks</b></a>	--omatrix1	Output matrix1 - SeedToSeed Connectivity	--distthresh1	Discards samples (in matrix1) shorter than this threshold (in mm - default=0)	--omatrix2	Output matrix2 - SeedToTarget2	--target2	Low resolution binary brain mask for storing connectivity distribution in matrix2 mode	--omatrix3	Output matrix3 (NxN connectivity matrix)	--target3	Mask used for NxN connectivity matrix (or Nxn if lrtarget3 is set)	--lrtarget3	Low resolution mask used for Nxn connectivity matrix	--distthresh3	Discards samples (in matrix3) shorter than this threshold (in mm - default=0)        <a href="#xfm"><b>Transforms</b></a>	--xfm		Transform taking seed space to DTI space (either FLIRT matrix or FNIRT warpfield) - default is identity	--invxfm	Transform taking DTI space to seed space (compulsory when using a warpfield for seeds_to_dti)	--seedref	Reference vol to define seed space in simple mode - diffusion space assumed if absent	--meshspace	Mesh reference space - either 'freesurfer' (default) or 'caret' or 'first'	<a href="#samp"><b>Sampling options</b></a>	-P,--nsamples	Number of samples - default=5000	-S,--nsteps	Number of steps per sample - default=2000	--steplength	Steplength in mm - default=0.5	--distthresh	Discards samples shorter than this threshold (in mm - default=0)	-c,--cthr	Curvature threshold - default=0.2	--fibthresh	Volume fraction before subsidary fibre orientations are considered - default=0.01	-l,--loopcheck	Perform loopchecks on paths - slower, but allows lower curvature threshold	-f,--usef	Use anisotropy to constrain tracking	--modeuler	Use modified euler streamlining	--sampvox	Sample random points within seed voxels	--randfib	Default 0. Set to 1 to randomly sample initial fibres (with f&gt;fibthresh).                         Set to 2 to sample in proportion fibres (with f&gt;fibthresh) to f.                         Set to 3 to sample ALL populations at random (even if f&lt;fibthresh)	--fibst		Force a starting fibre for tracking - default=1, i.e. first fibre orientation. Only works if randfib==0	--rseed		Random seed</pre><hr><a name="comparg"><h3>Compulsory arguments</h3></a><p>There are three compulsory arguments in probtrackx. In short, the algorithm needs to know the local orientation distributions (output of bedpostX), the brain mask and a seed region for probabilistic streamlines. </p><h4><b>-s &lt;basename&gt;</b></h4>&lt;basename&gt; is the prefix of all files containing the orientation distribution given by bedpostX, which in general are of the form (in the case of two fibres per voxel):<br><br><code> <pre>  merged_th1samples  merged_th2samples  merged_ph1samples  merged_ph2samples  merged_f1samples  merged_f2samples</pre></code><br>If the bedpostX output directory is &lt;pathdir&gt;, then the basename is <code>&lt;pathdir&gt;/merged</code>.<br><br> <h4><b>-m &lt;mask&gt;</b></h4>Binary brain mask (E.g. output of <b>bet</b>). This mask MUST BE IN DIFFUSION SPACE.<br><br><h4><b>-x &lt;seed&gt;</b></h4>Brain regions that serve as seed for probtabilistic streamlines. The argument can be one of the following:<br><br>- In <i>simple</i> mode (i.e. using the option <code>--mode=simple</code>), the seed is a ASCII textfile with seed voxel coordinates stored as follows :<br><code><pre>x1      y1      z1x2      y2      z2...      ...    ...xn      yn      zn</pre></code><br>- A 3D volume, in which case all non-zero voxels are considered as seed voxels. Probabilistic streamlines are seeded from the centre of voxels, unless the <code>--sampvox</code> option is turned on, in which case they are seeded randomly within each voxels of the seed mask.<br><br>- A list of volumes and/or surface files in ASCII file format as follows:<br><br><code><pre>  seed_file_1  seed_file_2  ...  seed_file_n</pre></code><br><p>Streamlines are seeded from all non-zero voxels of the seed files, or all vertices of the surface files. In the case where the surface files contain numerical values associated with vertices, tractography is seeded from all non-zero vertices, unless all the numerical values are zero, in which case the whole surface is considered as an ROI.</p><p>For more details on the supported surface formats, please see <a href="fdt_probtrackx_surface_formats.html">supported surface formats</a>.</p><p>In all the above cases, the user can track in either diffusion space, or any other space (e.g. structural, standard spaces), provided that the <code>--xfm</code> option is set. The <code>--seedref</code> option may need to be used if in <i>simple</i> mode, or if all seed files are surfaces. Also, when using surfaces, the user must specify the surface coordinate convention (<code>--meshspace</code> option).</p><hr><a name="optarg"><h3>Optional arguments</h3></a><a name="opt"><h4>Output options</h4></a>No need for more details on the arguments. However, it is worth listing here the output of probtrackx that are not set by the user. <pre>  probtrackx.log  : A ASCII text file with the full command-line that has been used.  waytotal        : A ASCII text file listing the total number of samples that have not been rejected.                     There will be one number per seed mask if the <code>--network</code> option is turned on.                     Rejection criteria are: hitting an exclusion mask (<code>--avoid</code>) or not hitting one (or all) inclusion mask(s) (<code>--waypoints</code>).</pre><a name="opt"><h4>More output options</h4></a><pre>  <b>--simple</b>     Track from a ASCII list of voxel coordinates. No arguments required.  <b>--network</b>    Switch on network mode. When the seed file is a ASCII list of seed masks (either volumes or surfaces)               output probabilistic streamlines that pass through every seed mask and one or more other seed masks.	       Under this mode, the <i>waytotal</i> file will contain one entry per seed mask.  <b>--opd</b>        When set, probtrackx will generate the spatial histogram of probabilistic streamlines. This histogram               is binned to the seed mask resolution (or <code>seedref</code> if seed mask is a surface or list of                coordinates). The default output name is <code>fdt_paths</code>.  <b>--pd</b>         Set this option to "correct" the probabilistic streamlines for distance from seed. This will affect the                output of the following options: <code>--opd</code>, <code>--os2t</code>, <code>--omatrix1,2,3</code>.               Instead of generating a <i>count</i> for the number of streamlines, it multiplies this number by the               <u>average length</u> of streamlines from each seed point.  <b>--os2t</b>       Set this option to output a set of files that record the number of samples from every seed point to                a group of targets (the <code>--targetmasks</i> entry).	  <b>--s2tastext</b>  Output seed_to_target information as a text file. This is a ASCII text file with a matrix that is               N seeds X M targets.</pre><a name="masks"><h4>Prior masks</h4></a>The following are options to set tractography masks for (1) seed_to_target calculations, or (2) adding priors to the tracking process (exclusion, inclusion, stopping masks). All these masks can either be 3D volumes, or a ASCII list of 3D volumes and/or surfaces. All these masks should be in SEED SPACE. These options can be used separately or in conjunction.<pre>  <b>--targetmasks</b>   ASCII list of target masks for seed_to_target output (combine with <code>--os2t</code> option).  <b>--waypoints</b>     Inclusion mask(s). Keep only those samples that go through either ALL or AT LEAST ONE OF the                   masks (depending on the value of <code>--waycond</code>).  <b>--waycond</b>       Choose inclusion mask criterion. Either ALL (default) or OR. Note that this will be set to OR for any                  set value that is different from ALL.                  Note that these conditions are by default to the whole tract (i.e. both halves).			 	          If you need to apply them to each half of the tract <i>separately</i>, you can add <code>--onewaycondition</code>.  <b>--avoid</b>         Exclusion mask(s). Disgard all samples that pass through one of these masks.  <b>--stop</b>          Stop tracking any sample that enters these masks (enter a voxel or collide with surface). Keep the rest                  of the streamlines unaffected.</pre><a name="mat123"><h4>Connectivity matrices and masks</h4></a><IMG ALIGN=CENTER height=200 SRC="fdt_images/fdt_matrix123.jpg" ALT="MATRIX123">  <p>The following set of options can be used to store a connectivity matrix between (1) all seed points and all other seed points, or (2) all seed points and all points in a target mask, or (3) all pairs of points in a target mask. All masks used here MUST BE IN SEED SPACE. These options can be used separately or in conjunction.</p><p>Matrix1 and Matrix2 store the number of samples (potentially modulated by distance if --pd is used) between the rows (seed points) and the columns of the matrix. Matrix3 stores the number of sample streamlines between each pair of points in a target mask. In this case, a streamline is sent from each seed point in <u>both directions</u>, then if the streamlines hits the target mask at two locations, the correspoding row and column of matrix3 is filled. Matrix1 and Matrix3 are symmetric, but Matrix2 isn't. Also, matrix3 isn't symmetric if using <code>--lrtarget3</code>.</p><p>Note on the ouput format: matrix1,2,3 are stored as 3 column ASCII coding of sparse matrices. These files can be loaded intomatlab using e.g.:<br> <pre>  <code>    x=load('matrix1.dot');    M=spconvert(x);   </code></pre></p><b><u>The options:</u></b><pre>  <b>--omatrix1</b>      Output SeedsXSeeds connectivity matrix. Typically, the seed mask(s) can represent grey matter, so this                  would be all GM to GM connectivity.  <b>--disttresh1</b>    Disgard sample streamlines (when filling matrix1) that are shorter than a given threshold (in mm).  <b>--omatrix2</b>      Output SeedsXTarget2 connectivity matrix. Typically, the seed can be grey matter, and target2 the                   rest of the brain (eventually low res version).  <b>--target2</b>       Masks defining the columns of Matrix2 (typically a low resolution version of the brain mask in seed space)  <b>--omatrix3</b>      Output Target3XTarget3 connectivity matrix. Typically this can be the whole of grey matter, while the seed                   mask is white matter.   <b>--target3</b>       Mask that defines the rows and columns of Matrix3. Only defines the rows if --lrtarget3 is set.  <b>--lrtarget3</b>     Mask defining the columns of Matrix3. Typically can be a low resolution version of Target3, but not                   necessarily.  <b>--distthresh3</b>   Disgard sample streamlines (when filling matrix3) that are shorter than a given threshold (in mm).</pre><a name="xfm"><h4>Transforms</h4></a>No more details required here.<a name="samp"><h4>Sampling options</h4></a>No more details required here.<HR><FONT SIZE=1>Copyright &copy; 2000-2011, written by <A HREF="http://www.fmrib.ox.ac.uk/~saad/index.html">S. Jbabdi</A>.</FONT>